from fastapi import FastAPI, HTTPException
from fastapi.responses import HTMLResponse
import uvicorn

app = FastAPI()

class Lib:
    def __init__(self):
        self.author = ''
        self.works = []
        self.work = []


item = [Lib() for i in range(5)]
item[0].author = 'Пушкин'
item[0].works = ['Капитанская дочка', 'Дубровский', 'Пиковая дама', 'Медный всадник', 'Руслан и Людмила']
item[0].work = ['Отец мой Андрей Петрович Гринев в молодости своей служил при графе Минихе и вышел в отставку премьер-майором в 17.. году. С тех пор жил он в своей Симбирской деревне, где и женился на девице Авдотье Васильевне Ю., дочери бедного тамошнего дворянина. Нас было девять человек детей. Все мои братья и сестры умерли во младенчестве.', 'Несколько лет тому назад в одном из своих поместий жил старинный русский барин, Кирила Петрович Троекуров. Его богатство, знатный род и связи давали ему большой вес в губерниях, где находилось его имение. Соседи рады были угождать малейшим его прихотям; губернские чиновники трепетали при его имени; Кирила Петрович принимал знаки подобострастия как надлежащую дань; дом его всегда был полон гостями, готовыми тешить его барскую праздность, разделяя шумные, а иногда и буйные его увеселения. Никто не дерзал отказываться от его приглашения или в известные дни не являться с должным почтением в село Покровское. В домашнем быту Кирила Петрович выказывал все пороки человека необразованного. Избалованный всем, что только окружало его, он привык давать полную волю всем порывам пылкого своего нрава и всем затеям довольно ограниченного ума. Несмотря на необыкновенную силу физических способностей, он раза два в неделю страдал от обжорства и каждый вечер бывал навеселе.', 'Однажды играли в карты у конногвардейца Нарумова. Долгая зимняя ночь прошла незаметно; сели ужинать в пятом часу утра. Те, которые остались в выигрыше, ели с большим аппетитом, прочие, в рассеянности, сидели перед пустыми своими приборами. Но шампанское явилось, разговор оживился, и все приняли в нем участие. — Что ты сделал, Сурин? — спросил хозяин. — Проиграл, по обыкновению. Надобно признаться, что я несчастлив: играю мирандолем, никогда не горячусь, ничем меня с толку не собьешь, а все проигрываюсь! — И ты ни разу не соблазнился? ни разу не поставил на руте?.. Твердость твоя для меня удивительна. — А каков Германн! — сказал один из гостей, указывая на молодого инженера, — отроду не брал он карты в руки, отроду не загнул ни одного пароли, а до пяти часов сидит с нами и смотрит на нашу игру!', 'На берегу пустынных волн Стоял он, дум великих полн, И вдаль глядел. Пред ним широко Река неслася; бедный чёлн По ней стремился одиноко. По мшистым, топким берегам Чернели избы здесь и там, Приют убогого чухонца; И лес, неведомый лучам В тумане спрятанного солнца, Кругом шумел.', 'У лукоморья дуб зеленый; Златая цепь на дубе том: И днем и ночью кот ученый Всё ходит по цепи кругом; Идет направо — песнь заводит, Налево — сказку говорит. Там чудеса: там леший бродит, Русалка на ветвях сидит; Там на неведомых дорожках Следы невиданных зверей;']
item[1].author = 'Гоголь'
item[1].works = ['Вий', 'Ревизор', 'Мертвые души', 'Записки сумасшедшего', 'Нос']
item[1].work = ['Как только ударял в Киеве поутру довольно звонкий семинарский колокол, висевший у ворот Братского монастыря, то уже со всего города спешили толпами школьники и бурсаки. Грамматики, риторы, философы и богословы, с тетрадями под мышкой, брели в класс. Грамматики были еще очень малы; идя, толкали друг друга и бранились между собою самым тоненьким дискантом; они были все почти в изодранных или запачканных платьях, и карманы их вечно были наполнены всякою дрянью, как-то: бабками, свистелками, сделанными из перышек, недоеденным пирогом, а иногда даже и маленькими воробьенками, из которых один, вдруг чиликнув среди необыкновенной тишины в классе, доставлял своему патрону порядочные пали в обе руки, а иногда и вишневые розги. Риторы шли солиднее: платья у них были часто совершенно целы, но зато на лице всегда почти бывало какое-нибудь украшение в виде риторического тропа: или один глаз уходил под самый лоб, или вместо губы целый пузырь, или какая-нибудь другая примета; эти говорили и божились между собою тенором. Философы целою октавою брали ниже; в карманах их, кроме крепких табачных корешков, ничего не было. Запасов они не делали никаких и все, что попадалось, съедали тогда же, от них слышалась трубка и горелка иногда так далеко, что проходивший мимо ремесленник долго еще, остановившись, нюхал, как гончая собака, воздух.', 'Городничий, уже постаревший на службе и очень неглупый по-своему человек. Хотя и взяточник, но ведет себя очень солидно; довольно сурьезен; несколько даже резонер; говорит ни громко, ни тихо, ни много, ни мало. Его каждое слово значительно. Черты лица его грубы и жестки, как у всякого, начавшего тяжелую службу с низших чинов. Переход от страха к радости, от низости к высокомерию довольно быстр, как у человека с грубо развитыми склонностями души. Он одет, по обыкновению, в своем мундире с петлицами и в ботфортах со шпорами. Волоса на нем стриженые, с проседью. Анна Андреевна, жена его, провинциальная кокетка, еще не совсем пожилых лет, воспитанная вполовину на романах и альбомах, вполовину на хлопотах в своей кладовой и девичьей. Очень любопытна и при случае выказывает тщеславие. Берет иногда власть над мужем потому только, что тот не находится что отвечать ей; но власть эта распространяется только на мелочи и состоит в выговорах и насмешках. Она четыре раза переодевается в разные платья в продолжение пьесы. Хлестаков, молодой человек лет двадцати трех, тоненький, худенький; несколько приглуповат и, как говорят, без царя в голове, — один из тех людей, которых в канцеляриях называют пустейшими. Говорит и действует без всякого соображения. Он не в состоянии остановить постоянного внимания на какой-нибудь мысли. Речь его отрывиста, и слова вылетают из уст его совершенно неожиданно. Чем более исполняющий эту роль покажет чистосердечия и простоты, тем более он выиграет. Одет по моде.', 'Кто бы ты ни был, мой читатель, на каком бы месте ни стоял, в каком бы звании ни находился, почтен ли ты высшим чином или человек простого сословия, но если тебя вразумил Бог грамоте и попалась уже тебе в руки моя книга, я прошу тебя помочь мне. В книге, которая перед тобой, которую, вероятно, ты уже прочел в ее первом издании, изображен человек, взятый из нашего же государства. Ездит он по нашей Русской земле, встречается с людьми всяких сословий, от благородных до простых. Взят он больше затем, чтобы показать недостатки и пороки русского человека, а не его достоинства и добродетели, и все люди, которые окружают его, взяты также затем, чтобы показать наши слабости и недостатки; лучшие люди и характеры будут в других частях. В книге этой многое описано неверно, не так, как есть и как действительно происходит в Русской земле, потому что я не мог узнать всего: мало жизни человека на то, чтобы узнать одному и сотую часть того, что делается в нашей земле. Притом от моей собственной оплошности, незрелости и поспешности произошло множество всяких ошибок и промахов, так что на всякой странице есть что поправить: я прошу тебя, читатель, поправить меня. Не пренебреги таким делом.', 'Сегодняшнего дня случилось необыкновенное приключение. Я встал поутру довольно поздно, и когда Мавра принесла мне вычищенные сапоги, я спросил, который час. Услышавши, что уже давно било десять, я поспешил поскорее одеться. Признаюсь, я бы совсем не пошел в департамент, зная заранее, какую кислую мину сделает наш начальник отделения. Он уже давно мне говорит: «Что это у тебя, братец, в голове всегда ералаш такой? Ты иной раз метаешься как угорелый, дело подчас так спутаешь, что сам сатана не разберет, в титуле поставишь маленькую букву, не выставишь ни числа, ни номера». Проклятая цапля! он, верно, завидует, что я сижу в директорском кабинете и очиниваю перья для его превосходительства. Словом, я не пошел бы в департамент, если бы не надежда видеться с казначеем и авось-либо выпросить у этого жида хоть сколько-нибудь из жалованья вперед. Вот еще создание! Чтобы он выдал когда-нибудь вперед за месяц деньги — господи боже мой, да скорее Страшный суд придет. Проси, хоть тресни, хоть будь в разнужде, — не выдаст, седой черт. А на квартире собственная кухарка бьет его по щекам. Это всему свету известно. Я не понимаю выгод служить в департаменте. Никаких совершенно ресурсов. Вот в губернском правлении, гражданских и казенных палатах совсем другое дело: там, смотришь, иной прижался в самом уголку и пописывает. Фрачишка на нем гадкий, рожа такая, что плюнуть хочется, а посмотри ты, какую он дачу нанимает!', 'Марта 25 числа случилось в Петербурге необыкновенно странное происшествие. Цирюльник Иван Яковлевич, живущий на Вознесенском проспекте (фамилия его утрачена, и даже на вывеске его — где изображен господин с намыленною щекою и надписью: «И кровь отворяют» — не выставлено ничего более), цирюльник Иван Яковлевич проснулся довольно рано и услышал запах горячего хлеба. Приподнявшись немного на кровати, он увидел, что супруга его, довольно почтенная дама, очень любившая пить кофий, вынимала из печи только что испеченные хлебы. — Сегодня я, Прасковья Осиповна, не буду пить кофию, — сказал Иван Яковлевич, — а вместо того хочется мне съесть горячего хлебца с луком. (То есть Иван Яковлевич хотел бы и того и другого, но знал, что было совершенно невозможно требовать двух вещей разом, ибо Прасковья Осиповна очень не любила таких прихотей.) «Пусть дурак ест хлеб; мне же лучше, — подумала про себя супруга, — останется кофию лишняя порция». И бросила один хлеб на стол.']
item[2].author = 'Лермонтов'
item[2].works = ['Мцыри', 'Бородино', 'Демон', 'Веселый час', 'Кавказ']
item[2].work = ['Немного лет тому назад, Там, где, сливаяся, шумят, Обнявшись, будто две сестры, Струи Арагвы и Куры, Был монастырь. Из-за горы И нынче видит пешеход Столбы обрушенных ворот, И башни, и церковный свод; Но не курится уж под ним Кадильниц благовонный дым, Не слышно пенье в поздний час Молящих иноков за нас. Теперь один старик седой, Развалин страж полуживой, Людьми и смертию забыт, Сметает пыль с могильных плит, Которых надпись говорит О славе прошлой — и о том, Как, удручен своим венцом, Такой-то царь, в такой-то год, Вручал России свой народ.', '— Скажи-ка, дядя, ведь не даром Москва, спаленная пожаром, Французу отдана? Ведь были ж схватки боевые, Да, говорят, еще какие! Недаром помнит вся Россия Про день Бородина! — Да, были люди в наше время, Не то, что нынешнее племя: Богатыри — не вы! Плохая им досталась доля: Немногие вернулись с поля... Не будь на то господня воля, Не отдали б Москвы! Мы долго молча отступали, Досадно было, боя ждали, Ворчали старики: «Что ж мы? на зимние квартиры? Не смеют, что ли, командиры Чужие изорвать мундиры О русские штыки?»', 'Печальный Демон, дух изгнанья, Летал над грешною землей, И лучших дней воспоминанья Пред ним теснилися толпой; Тех дней, когда в жилище света Блистал он, чистый херувим, Когда бегущая комета Улыбкой ласковой привета Любила поменяться с ним, Когда сквозь вечные туманы, Познанья жадный, он следил Кочующие караваны В пространстве брошенных светил; Когда он верил и любил, Счастливый первенец творенья! Не знал ни злобы, ни сомненья, И не грозил уму его Веков бесплодных ряд унылый... И много, много... и всего Припомнить не имел он силы!', 'Зачем вы на меня, Любезные друзья, В решетку так глядите? Не плачьте, не грустите! Пускай умру сейчас, Коль я в углу темницы Смочил один хоть раз Слезой мои ресницы!.. Ликуйте вы одне И чаши осушайте, Любви в безумном сне, Как прежде, утопайте; Но в пламенном вине Меня воспоминайте!..', 'Хотя я судьбой на заре моих дней, О южные горы, отторгнут от вас, Чтоб вечно их помнить, там надо быть раз: Как сладкую песню отчизны моей, Люблю я Кавказ. В младенческих летах я мать потерял. Но мнилось, что в розовый вечера час Та степь повторяла мне памятный глас. За это люблю я вершины тех скал, Люблю я Кавказ. Я счастлив был с вами, ущелия гор; Пять лет пронеслось: все тоскую по вас. Там видел я пару божественных глаз; И сердце лепечет, воспомня тот взор: Люблю я Кавказ!..']
item[3].author = 'Куприн'
item[3].works = ['Гранатовый браслет', 'Олеся', 'Яма', 'Золотой петух', 'Слон']
item[3].work = ['В середине августа, перед рождением молодого месяца, вдруг наступили отвратительные погоды, какие так свойственны северному побережью Черного моря. То по целым суткам тяжело лежал над землею и морем густой туман, и тогда огромная сирена на маяке ревела днем и ночью, точно бешеный бык. То с утра до утра шел не переставая мелкий, как водяная пыль, дождик, превращавший глинистые дороги и тропинки в сплошную густую грязь, в которой увязали надолго возы и экипажи. То задувал с северо-запада, со стороны степи свирепый ураган; от него верхушки деревьев раскачивались, пригибаясь и выпрямляясь, точно волны в бурю, гремели по ночам железные кровли дач, и казалось, будто кто-то бегает по ним в подкованных сапогах, вздрагивали оконные рамы, хлопали двери, и дико завывало в печных трубах. Несколько рыбачьих баркасов заблудилось в море, а два и совсем не вернулись: только спустя неделю повыбрасывало трупы рыбаков в разных местах берега.', 'Мой слуга, повар и спутник по охоте — полесовщик Ярмола вошел в комнату, согнувшись под вязанкой дров, сбросил ее с грохотом на пол и подышал на замерзшие пальцы. — У, какой ветер, паныч, на дворе, — сказал он, садясь на корточки перед заслонкой. — Нужно хорошо в грубке протопить. Позвольте запалочку, паныч. — Значит, завтра на зайцев не пойдем, а? Как ты думаешь, Ярмола? — Нет... не можно... слышите, какая завируха. Заяц теперь лежит и — а ни мур-мур... Завтра и одного следа не увидите. Судьба забросила меня на целых шесть месяцев в глухую деревушку Волынской губернии, на окраину Полесья, и охота была единственным моим занятием и удовольствием.', 'Давным-давно, задолго до железных дорог, на самой дальней окраине большого южного города жили из рода в род ямщики — казенные и вольные. Оттого и вся эта местность называлась Ямской слободой, или просто Ямской, Ямками, или, еще короче, Ямой. Впоследствии, когда паровая тяга убила конный извоз, лихое ямщичье племя понемногу растеряло свои буйные замашки и молодецкие обычаи, перешло к другим занятиям, распалось и разбрелось. Но за Ямой на много лет — даже до сего времени — осталась темная слава, как о месте развеселом, пьяном, драчливом и в ночную пору небезопасном. Как-то само собою случилось, что на развалинах тех старинных, насиженных гнезд, где раньше румяные разбитные солдатки и чернобровые сдобные ямские вдовы тайно торговали водкой и свободной любовью, постепенно стали вырастать открытые публичные дома, разрешенные начальством, руководимые официальным надзором и подчиненные нарочитым суровым правилам.', 'Не могу точно сказать, когда случилось это чудо. Во всяком случае, — если не в день летнего солнцестояния, 21 июня, то очень близко к нему. А происходило оно на даче, в Виль-дАврэ, в десяти километрах от Парижа. Я тогда проснулся еще до света, проснулся как-то внезапно, без мутного перехода от сна к яви, с чувством легкой свежести и со сладкой уверенностью, что там, за окнами, под открытым небом, в нежной ясности занимающегося утра происходит какое-то простое и прелестное чудо. Так иногда меня ласково пробуждали до зари — веселая песня скворца или дерзкий, но мелодичный свист черного дрозда. Я распахнул окно и сел на подоконник. В еще холодном воздухе стояли наивные ароматы трав, листьев, коры, земли. В темных паникадилах каштанов еще путались застрявшие ночью, как тончайшая кисея, обрывки ночного тумана. Но деревья уже проснулись и поеживались, открывая радостно и лениво миллионы своих глаз: разве деревья не видят и не слышат?', 'Маленькая девочка нездорова. Каждый день к ней ходит доктор Михаил Петрович, которого она знает уже давно-давно. А иногда он приводит с собою еще двух докторов, незнакомых. Они переворачивают девочку на спину и на живот, слушают что-то, приложив ухо к телу, оттягивают вниз глазные веки и смотрят. При этом они как-то важно посапывают, лица у них строгие, и говорят они между собою на непонятном языке. Потом переходят из детской в гостиную, где их дожидается мама. Самый главный доктор — высокий, седой, в золотых очках — рассказывает ей о чем-то серьезно и долго. Дверь не закрыта, и девочке с ее кровати все видно и слышно. Многого она не понимает, но знает, что речь идет о ней. Мама глядит на доктора большими, усталыми, заплаканными глазами.']
item[4].author = 'Блок'
item[4].works = ['Двенацать', 'Скифы', 'Незнакомка', 'Балаганчик', 'Коршун']
item[4].work = ['Черный вечер. Белый снег. Ветер, ветер! На ногах не стоит человек. Ветер, ветер — На всем Божьем свете! Завивает ветер Белый снежок. Под снежком — ледок. Скользко, тяжко, Всякий ходок Скользит — ах, бедняжка! От здания к зданию Протянут канат. На канате — плакат: «Вся власть Учредительному Собранию!» Старушка убивается — плачет, Никак не поймет, что значит, На что такой плакат, Такой огромный лоскут? Сколько бы вышло портянок для ребят, А всякий — раздет, разут...', 'Мильоны — вас. Нас — тьмы, и тьмы, и тьмы. Попробуйте, сразитесь с нами! Да, Скифы — мы! Да, азиаты — мы, — С раскосыми и жадными очами! Для вас — века, для нас — единый час. Мы, как послушные холопы, Держали щит меж двух враждебных рас — Монголов и Европы! Века, века ваш старый горн ковал И заглушал грома лавины, И дикой сказкой был для вас провал И Лиссабона и Мессины!', 'По вечерам над ресторанами Горячий воздух дик и глух, И правит окриками пьяными Весенний и тлетворный дух. Вдали, над пылью переулочной, Над скукой загородных дач, Чуть золотится крендель булочной, И раздается детский плач. И каждый вечер, за шлагбаумами, Заламывая котелки, Среди канав гуляют с дамами Испытанные остряки.', 'Вот открыт балаганчик Для веселых и славных детей, Смотрят девочка и мальчик На дам, королей и чертей. И звучит эта адская музыка, Завывает унылый смычок. Страшный черт ухватил карапузика, И стекает клюквенный сок.', 'Над сонным лугом коршун кружит И смотрит на пустынный луг. — В избушке мать над сыном тужит: «На хлеба, на, на грудь, соси, Расти, покорствуй, крест неси». Идут века, шумит война, Встает мятеж, горят деревни, А ты всё та ж, моя страна, В красе заплаканной и древней. — Доколе матери тужить? Доколе коршуну кружить?']


@app.get('/lib')
def liblist():
    return [item[i].author for i in range(len(item))]


@app.get("/lib/{author}")
def author(author: str):
    for i in range(len(item)):
        if author == item[i].author:
            return [item[i].works[j] for j in range(len(item[i].work))]
    raise HTTPException(status_code=404, detail="Автор не найден. Вы ввели неправильно имя автора!!!")


@app.get('/lib/{author}/{book}')
def work(author: str, book: str):
    for i in range(len(item)):
        if author == item[i].author:
            for j in range(len(item[i].works)):
                if book == item[i].works[j]:
                    return HTMLResponse("<b>"+item[i].work[j]+"<b>")
    raise HTTPException(status_code=404, detail="Страница не надйена!")


if __name__ == '__main__':
    uvicorn.run(app, host="127.0.0.1", port="8080")
